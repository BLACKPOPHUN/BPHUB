<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üîê ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô</title>
<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.container {
    background: white;
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    max-width: 450px;
    width: 100%;
    animation: slideIn 0.5s ease-out;
}

.admin-container {
    max-width: 1200px;
    width: 100%;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(-30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.header {
    text-align: center;
    margin-bottom: 30px;
}

.icon {
    font-size: 4em;
    margin-bottom: 10px;
}

h1 {
    color: #333;
    font-size: 2em;
    margin-bottom: 10px;
}

.subtitle {
    color: #666;
    font-size: 1em;
}

.step-indicator {
    display: flex;
    justify-content: space-between;
    margin-bottom: 30px;
    padding: 0 20px;
}

.step {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: #e0e0e0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    color: #999;
    position: relative;
    transition: all 0.3s;
}

.step.active {
    background: #667eea;
    color: white;
    transform: scale(1.2);
}

.step.completed {
    background: #4caf50;
    color: white;
}

.step::after {
    content: '';
    position: absolute;
    width: 100%;
    height: 3px;
    background: #e0e0e0;
    left: 50%;
    top: 50%;
    z-index: -1;
}

.step:last-child::after {
    display: none;
}

.form-group {
    margin-bottom: 20px;
}

label {
    display: block;
    color: #333;
    font-weight: 600;
    margin-bottom: 8px;
    font-size: 0.95em;
}

input, select {
    width: 100%;
    padding: 12px 15px;
    border: 2px solid #e0e0e0;
    border-radius: 10px;
    font-size: 1em;
    transition: all 0.3s;
    font-family: inherit;
}

input:focus, select:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.file-upload {
    position: relative;
    overflow: hidden;
    background: #f5f5f5;
    border: 2px dashed #ccc;
    border-radius: 10px;
    padding: 30px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s;
}

.file-upload:hover {
    border-color: #667eea;
    background: #f0f4ff;
}

.file-upload input[type="file"] {
    position: absolute;
    left: -9999px;
}

.file-upload-text {
    color: #666;
    font-size: 0.95em;
}

.file-name {
    margin-top: 10px;
    color: #667eea;
    font-weight: 600;
}

.preview-image {
    max-width: 100%;
    max-height: 200px;
    margin-top: 15px;
    border-radius: 10px;
    display: none;
}

.btn {
    width: 100%;
    padding: 15px;
    border: none;
    border-radius: 10px;
    font-size: 1.1em;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    margin-top: 10px;
}

.btn-primary {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
}

.btn-primary:disabled {
    background: #ccc;
    cursor: not-allowed;
    transform: none;
}

.btn-secondary {
    background: #f5f5f5;
    color: #666;
}

.btn-secondary:hover {
    background: #e0e0e0;
}

.btn-small {
    width: auto;
    padding: 8px 20px;
    font-size: 0.9em;
    display: inline-block;
    margin: 5px;
}

.btn-approve {
    background: #4caf50;
}

.btn-reject {
    background: #f44336;
}

.error-msg {
    color: #f44336;
    font-size: 0.9em;
    margin-top: 5px;
    display: none;
}

.success-screen {
    display: none;
    text-align: center;
}

.success-icon {
    font-size: 5em;
    color: #4caf50;
    animation: scaleIn 0.5s ease-out;
}

@keyframes scaleIn {
    from {
        transform: scale(0);
    }
    to {
        transform: scale(1);
    }
}

.step-content {
    display: none;
}

.step-content.active {
    display: block;
    animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.info-box {
    background: #f0f4ff;
    border-left: 4px solid #667eea;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 20px;
    font-size: 0.9em;
    color: #555;
}

/* Admin Styles */
.admin-panel {
    display: none;
}

.admin-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
    padding-bottom: 20px;
    border-bottom: 2px solid #e0e0e0;
}

.logout-btn {
    background: #f44336;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1em;
    transition: all 0.3s;
}

.logout-btn:hover {
    background: #d32f2f;
}

.tabs {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
}

.tab {
    padding: 12px 24px;
    background: #f5f5f5;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-size: 1em;
    font-weight: 600;
    transition: all 0.3s;
    color: #666;
}

.tab.active {
    background: #667eea;
    color: white;
}

.stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.stat-card {
    background: linear-gradient(135deg, #667eea, #764ba2);
    padding: 20px;
    border-radius: 15px;
    color: white;
    text-align: center;
}

.stat-number {
    font-size: 2.5em;
    font-weight: bold;
    margin: 10px 0;
}

.stat-label {
    font-size: 0.9em;
    opacity: 0.9;
}

.request-list {
    display: grid;
    gap: 15px;
}

.request-card {
    background: #f9f9f9;
    padding: 20px;
    border-radius: 15px;
    border: 2px solid #e0e0e0;
    transition: all 0.3s;
}

.request-card:hover {
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.request-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.status-badge {
    padding: 5px 15px;
    border-radius: 20px;
    font-size: 0.85em;
    font-weight: 600;
}

.status-pending {
    background: #fff3cd;
    color: #856404;
}

.status-approved {
    background: #d4edda;
    color: #155724;
}

.status-rejected {
    background: #f8d7da;
    color: #721c24;
}

.request-details {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 10px;
    margin: 15px 0;
}

.detail-item {
    font-size: 0.9em;
    color: #555;
}

.detail-label {
    font-weight: 600;
    color: #333;
}

.document-preview {
    margin: 15px 0;
    text-align: center;
}

.document-preview img {
    max-width: 100%;
    max-height: 300px;
    border-radius: 10px;
    border: 2px solid #e0e0e0;
}

.action-buttons {
    display: flex;
    gap: 10px;
    margin-top: 15px;
}

.admin-login {
    display: none;
    text-align: center;
}

.admin-link {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: rgba(255,255,255,0.2);
    backdrop-filter: blur(10px);
    color: white;
    padding: 12px 20px;
    border-radius: 10px;
    text-decoration: none;
    font-size: 0.9em;
    transition: all 0.3s;
}

.admin-link:hover {
    background: rgba(255,255,255,0.3);
    transform: translateY(-2px);
}

@media (max-width: 768px) {
    .container {
        padding: 30px 20px;
    }
    h1 {
        font-size: 1.5em;
    }
    .step {
        width: 35px;
        height: 35px;
        font-size: 0.9em;
    }
    .stats {
        grid-template-columns: 1fr;
    }
    .action-buttons {
        flex-direction: column;
    }
}
</style>
</head>
<body>

<!-- User Form -->
<div class="container" id="userForm">
    <div class="header">
        <div class="icon">üîê</div>
        <h1>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô</h1>
        <p class="subtitle">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô</p>
    </div>

    <div class="step-indicator">
        <div class="step active" id="stepIndicator1">1</div>
        <div class="step" id="stepIndicator2">2</div>
        <div class="step" id="stepIndicator3">3</div>
    </div>

    <!-- Step 1: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß -->
    <div class="step-content active" id="step1">
        <div class="info-box">
            üìã ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
        </div>
        
        <div class="form-group">
            <label>‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• *</label>
            <input type="text" id="fullName" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ">
            <div class="error-msg" id="fullNameError">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</div>
        </div>

        <div class="form-group">
            <label>‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î *</label>
            <input type="date" id="birthDate">
            <div class="error-msg" id="birthDateError">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î</div>
        </div>

        <div class="form-group">
            <label>‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå *</label>
            <input type="tel" id="phone" placeholder="08X-XXX-XXXX" maxlength="10">
            <div class="error-msg" id="phoneError">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå 10 ‡∏´‡∏•‡∏±‡∏Å</div>
        </div>

        <button class="btn btn-primary" onclick="goToStep(2)">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí</button>
    </div>

    <!-- Step 2: ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà -->
    <div class="step-content" id="step2">
        <div class="info-box">
            üè† ‡∏Å‡∏£‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
        </div>

        <div class="form-group">
            <label>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà *</label>
            <input type="text" id="address" placeholder="‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà, ‡∏ñ‡∏ô‡∏ô, ‡∏ã‡∏≠‡∏¢">
            <div class="error-msg" id="addressError">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</div>
        </div>

        <div class="form-group">
            <label>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î *</label>
            <select id="province">
                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</option>
                <option>‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£</option>
                <option>‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà</option>
                <option>‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï</option>
                <option>‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô</option>
                <option>‡∏ô‡∏Ñ‡∏£‡∏£‡∏≤‡∏ä‡∏™‡∏µ‡∏°‡∏≤</option>
                <option>‡∏™‡∏á‡∏Ç‡∏•‡∏≤</option>
                <option>‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ</option>
                <option>‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
            </select>
            <div class="error-msg" id="provinceError">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</div>
        </div>

        <div class="form-group">
            <label>‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå *</label>
            <input type="text" id="postcode" placeholder="XXXXX" maxlength="5">
            <div class="error-msg" id="postcodeError">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå 5 ‡∏´‡∏•‡∏±‡∏Å</div>
        </div>

        <button class="btn btn-secondary" onclick="goToStep(1)">‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
        <button class="btn btn-primary" onclick="goToStep(3)">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí</button>
    </div>

    <!-- Step 3: ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ -->
    <div class="step-content" id="step3">
        <div class="info-box">
            üì∏ ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏ñ‡πà‡∏≤‡∏¢‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
        </div>

        <div class="form-group">
            <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ *</label>
            <select id="docType">
                <option value="idcard">‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô</option>
                <option value="passport">‡∏û‡∏≤‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï</option>
                <option value="driving">‡πÉ‡∏ö‡∏Ç‡∏±‡∏ö‡∏Ç‡∏µ‡πà</option>
            </select>
        </div>

        <div class="form-group">
            <label>‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ *</label>
            <label for="fileInput" class="file-upload">
                <div class="file-upload-text">
                    üìÅ ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏ü‡∏•‡πå<br>
                    <small>‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö JPG, PNG (‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 5MB)</small>
                </div>
                <div class="file-name" id="fileName"></div>
                <img class="preview-image" id="previewImage">
                <input type="file" id="fileInput" accept="image/*" onchange="handleFileSelect(event)">
            </label>
            <div class="error-msg" id="fileError">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£</div>
        </div>

        <button class="btn btn-secondary" onclick="goToStep(2)">‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
        <button class="btn btn-primary" onclick="submitVerification()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô ‚úì</button>
    </div>

    <!-- Success Screen -->
    <div class="success-screen" id="successScreen">
        <div class="success-icon">‚úÖ</div>
        <h1 style="color: #4caf50; margin: 20px 0;">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h1>
        <p style="color: #666; margin-bottom: 30px;">
            ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤<br>
            ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á
        </p>
        <button class="btn btn-primary" onclick="location.reload()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
    </div>
</div>

<!-- Admin Login -->
<div class="container admin-login" id="adminLogin">
    <div class="header">
        <div class="icon">üë®‚Äçüíº</div>
        <h1>Admin Login</h1>
        <p class="subtitle">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•</p>
    </div>

    <div class="form-group">
        <label>Username</label>
        <input type="text" id="adminUsername" placeholder="admin">
    </div>

    <div class="form-group">
        <label>Password</label>
        <input type="password" id="adminPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
    </div>

    <button class="btn btn-primary" onclick="adminLogin()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
    <button class="btn btn-secondary" onclick="showUserForm()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
    
    <div class="error-msg" id="adminLoginError" style="text-align:center; margin-top:10px;">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</div>
</div>

<!-- Admin Panel -->
<div class="container admin-container admin-panel" id="adminPanel">
    <div class="admin-header">
        <div>
            <h1>üîç ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h1>
            <p style="color:#666; margin-top:5px;">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏±‡∏ß‡∏ï‡∏ô</p>
        </div>
        <button class="logout-btn" onclick="adminLogout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
    </div>

    <div class="stats">
        <div class="stat-card" style="background: linear-gradient(135deg, #FFA726, #FB8C00);">
            <div class="stat-label">‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</div>
            <div class="stat-number" id="pendingCount">0</div>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, #66BB6A, #43A047);">
            <div class="stat-label">‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß</div>
            <div class="stat-number" id="approvedCount">0</div>
        </div>
        <div class="stat-card" style="background: linear-gradient(135deg, #EF5350, #E53935);">
            <div class="stat-label">‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò</div>
            <div class="stat-number" id="rejectedCount">0</div>
        </div>
    </div>

    <div class="tabs">
        <button class="tab active" onclick="filterRequests('all')">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
        <button class="tab" onclick="filterRequests('pending')">‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</button>
        <button class="tab" onclick="filterRequests('approved')">‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß</button>
        <button class="tab" onclick="filterRequests('rejected')">‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò</button>
    </div>

    <div class="request-list" id="requestList">
        <!-- Requests will be loaded here -->
    </div>
</div>

<a href="#" class="admin-link" onclick="showAdminLogin(); return false;">üë®‚Äçüíº Admin</a>

<script>
let currentStep = 1;
let formData = {};
let requests = [];
let currentFilter = 'all';

// Load requests from localStorage
function loadRequests() {
    const stored = localStorage.getItem('verificationRequests');
    if (stored) {
        requests = JSON.parse(stored);
    }
}

// Save requests to localStorage
function saveRequests() {
    localStorage.setItem('verificationRequests', JSON.stringify(requests));
}

// User Form Functions
function goToStep(step) {
    if (step > currentStep && !validateStep(currentStep)) {
        return;
    }

    document.querySelectorAll('.step-content').forEach(el => {
        el.classList.remove('active');
    });

    document.getElementById('step' + step).classList.add('active');

    document.querySelectorAll('.step').forEach((el, index) => {
        el.classList.remove('active', 'completed');
        if (index + 1 < step) {
            el.classList.add('completed');
        } else if (index + 1 === step) {
            el.classList.add('active');
        }
    });

    currentStep = step;
}

function validateStep(step) {
    let isValid = true;

    document.querySelectorAll('.error-msg').forEach(el => {
        el.style.display = 'none';
    });

    if (step === 1) {
        const fullName = document.getElementById('fullName').value.trim();
        const birthDate = document.getElementById('birthDate').value;
        const phone = document.getElementById('phone').value.trim();

        if (!fullName) {
            document.getElementById('fullNameError').style.display = 'block';
            isValid = false;
        }
        if (!birthDate) {
            document.getElementById('birthDateError').style.display = 'block';
            isValid = false;
        }
        if (!phone || phone.length !== 10) {
            document.getElementById('phoneError').style.display = 'block';
            isValid = false;
        }

        if (isValid) {
            formData.fullName = fullName;
            formData.birthDate = birthDate;
            formData.phone = phone;
        }
    }

    if (step === 2) {
        const address = document.getElementById('address').value.trim();
        const province = document.getElementById('province').value;
        const postcode = document.getElementById('postcode').value.trim();

        if (!address) {
            document.getElementById('addressError').style.display = 'block';
            isValid = false;
        }
        if (!province) {
            document.getElementById('provinceError').style.display = 'block';
            isValid = false;
        }
        if (!postcode || postcode.length !== 5) {
            document.getElementById('postcodeError').style.display = 'block';
            isValid = false;
        }

        if (isValid) {
            formData.address = address;
            formData.province = province;
            formData.postcode = postcode;
        }
    }

    return isValid;
}

function handleFileSelect(event) {
    const file = event.target.files[0];
    if (file) {
        if (file.size > 5 * 1024 * 1024) {
            alert('‡πÑ‡∏ü‡∏•‡πå‡∏°‡∏µ‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏´‡∏ç‡πà‡πÄ‡∏Å‡∏¥‡∏ô 5MB');
            return;
        }

        document.getElementById('fileName').textContent = '‚úì ' + file.name;

        const reader = new FileReader();
        reader.onload = function(e) {
            const preview = document.getElementById('previewImage');
            preview.src = e.target.result;
            preview.style.display = 'block';
            formData.documentImage = e.target.result;
        };
        reader.readAsDataURL(file);
    }
}

function submitVerification() {
    if (!formData.documentImage) {
        document.getElementById('fileError').style.display = 'block';
        return;
    }

    document.getElementById('fileError').style.display = 'none';
    formData.docType = document.getElementById('docType').value;
    formData.status = 'pending';
    formData.id = Date.now();
    formData.submittedAt = new Date().toLocaleString('th-TH');

    loadRequests();
    requests.push(formData);
    saveRequests();

    document.querySelectorAll('.step-content').forEach(el => {
        el.style.display = 'none';
    });
    document.querySelector('.step-indicator').style.display = 'none';
    document.getElementById('successScreen').style.display = 'block';
}

// Admin Functions
function showAdminLogin() {
    document.getElementById('userForm').style.display = 'none';
    document.getElementById('adminLogin').style.display = 'block';
    document.getElementById('adminPanel').style.display = 'none';
}

function showUserForm() {
    document.getElementById('userForm').style.display = 'block';
    document.getElementById('adminLogin').style.display = 'none';
    document.getElementById('adminPanel').style.display = 'none';
}

function adminLogin() {
    const username = document.getElementById('adminUsername').value;
    const password = document.getElementById('adminPassword').value;

    if (username === 'admin' && password === '2337952') {
        document.getElementById('adminLogin').style.display = 'none';
        document.getElementById('adminPanel').style.display = 'block';
        loadAdminPanel();
    } else {
        document.getElementById('adminLoginError').style.display = 'block';
    }
}

function adminLogout() {
    showUserForm();
}

function loadAdminPanel() {
    loadRequests();
    updateStats();
    renderRequests();
}

function updateStats() {
    const pending = requests.filter(r => r.status === 'pending').length;
    const approved = requests.filter(r => r.status === 'approved').length;
    const rejected = requests.filter(r => r.status === 'rejected').length;

    document.getElementById('pendingCount').textContent = pending;
    document.getElementById('approvedCount').textContent = approved;
    document.getElementById('rejectedCount').textContent = rejected;
}

function filterRequests(status) {
    currentFilter = status;
    document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
    event.target.classList.add('active');
    renderRequests();
}

function renderRequests() {
    const container = document.getElementById('requestList');
    let filteredRequests = requests;

    if (currentFilter !== 'all') {
        filteredRequests = requests.filter(r => r.status === currentFilter);
    }

    if (filteredRequests.length === 0) {
        container.innerHTML = '<p style="text-align:center; color:#999; padding:40px;">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>';
        return;
    }

    container.innerHTML = filteredRequests.reverse().map(req => {
        const statusClass = `status-${req.status}`;
        const statusText = {
            pending: '‚è≥ ‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö',
            approved: '‚úÖ ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß',
            rejected: '‚ùå ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò'
        };

        // ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏≤‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
        let actionButtons = '';
        if (req.status === 'pending') {
            actionButtons = `
                <div class="action-buttons">
                    <button class="btn btn-small btn-approve" onclick="approveRequest(${req.id})">‚úì ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</button>
                    <button class="btn btn-small btn-reject" onclick="rejectRequest(${req.id})">‚úó ‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò</button>
                </div>
            `;
        } else if (req.status === 'approved') {
            actionButtons = `
                <div class="action-buttons">
                    <button class="btn btn-small btn-reject" onclick="rejectRequest(${req.id})">‚úó ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏è‡∏¥‡πÄ‡∏™‡∏ò</button>
                    <button class="btn btn-small btn-secondary" onclick="setPending(${req.id})">‚è≥ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à</button>
                </div>
            `;
        } else if (req.status === 'rejected') {
            actionButtons = `
                <div class="action-buttons">
                    <button class="btn btn-small btn-approve" onclick="approveRequest(${req.id})">‚úì ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥</button>
                    <button class="btn btn-small btn-secondary" onclick="setPending(${req.id})">‚è≥ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à</button>
                </div>
            `;
        }

        const docTypeText = {
            idcard: '‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô',
            passport: '‡∏û‡∏≤‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï',
            driving: '‡πÉ‡∏ö‡∏Ç‡∏±‡∏ö‡∏Ç‡∏µ‡πà'
        };

        return `
            <div class="request-card">
                <div class="request-header">
                    <div>
                        <h3 style="margin-bottom:5px;">${req.fullName}</h3>
                        <small style="color:#999;">‡∏™‡πà‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠: ${req.submittedAt}</small>
                    </div>
                    <span class="status-badge ${statusClass}">${statusText[req.status]}</span>
                </div>

                <div class="request-details">
                    <div class="detail-item">
                        <div class="detail-label">üìû ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£:</div>
                        ${req.phone}
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">üéÇ ‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î:</div>
                        ${new Date(req.birthDate).toLocaleDateString('th-TH')}
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">üìç ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î:</div>
                        ${req.province}
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">üìÆ ‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå:</div>
                        ${req.postcode}
                    </div>
                </div>

                <div class="detail-item" style="margin-top:10px;">
                    <div class="detail-label">üè† ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà:</div>
                    ${req.address}
                </div>

                <div class="detail-item" style="margin-top:10px;">
                    <div class="detail-label">üìÑ ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£:</div>
                    ${docTypeText[req.docType]}
                </div>

                <div class="document-preview">
                    <div class="detail-label" style="margin-bottom:10px;">üì∏ ‡∏£‡∏π‡∏õ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£:</div>
                    <img src="${req.documentImage}" alt="Document">
                </div>

                ${actionButtons}
            </div>
        `;
    }).join('');
}

function approveRequest(id) {
    const request = requests.find(r => r.id === id);
    if (request) {
        request.status = 'approved';
        request.reviewedAt = new Date().toLocaleString('th-TH');
        saveRequests();
        loadAdminPanel();
    }
}

function rejectRequest(id) {
    const request = requests.find(r => r.id === id);
    if (request) {
        request.status = 'rejected';
        request.reviewedAt = new Date().toLocaleString('th-TH');
        saveRequests();
        loadAdminPanel();
    }
}

function setPending(id) {
    const request = requests.find(r => r.id === id);
    if (request) {
        request.status = 'pending';
        request.reviewedAt = new Date().toLocaleString('th-TH');
        saveRequests();
        loadAdminPanel();
    }
}

// Input formatting
document.getElementById('phone').addEventListener('input', function(e) {
    this.value = this.value.replace(/[^0-9]/g, '');
});

document.getElementById('postcode').addEventListener('input', function(e) {
    this.value = this.value.replace(/[^0-9]/g, '');
});

// Initialize
window.onload = function() {
    loadRequests();
}
</script>

</body>
</html>
